---
documentclass: article
geometry: margin=1cm,top=5cm,headheight=3cm,headsep=1cm
fontsize: 12pt
output: 
  pdf_document: 
    toc: false
    keep_tex: false
    includes:
      in_header: headIncl.tex
params:
  FARMNAME: "fname"
  GROWERNAME: "gname"
  NUMFIELDYEARS: "nfy" 
  NUMCROPS: "nc"
  NUMYEARS: "ny"
  PERCMARGACRES: "pmac"
  TABLEHERE: "tabhere"
  FIGUREHERE: "fighere"
title: ""

---

```{r setup, include=FALSE}
library(knitr)
library(kableExtra)

knitr::opts_chunk$set(echo = FALSE)

```


<!-- Need to add a banner here, and possibly some logos. Some possible links that might help: -->
<!-- https://tex.stackexchange.com/questions/297240/adding-an-image-to-a-header-in-latex -->
<!-- https://bookdown.org/yihui/rmarkdown-cookbook/latex-logo.html -->
<!-- https://tex.stackexchange.com/questions/276358/text-on-background-image-footer-and-header/276453 -->
<!-- https://tex.stackexchange.com/questions/411212/set-header-background-and-text-color-using-fancyhdr -->

<!-- Eventual goals: -->
<!-- https://rfortherestofus.com/2021/11/multicolumn/ -->

<!-- Begin multiple columns. For columns of different widths, might need vwcol or flowfram: https://tex.stackexchange.com/questions/89721/different-column-widths-using-multicol -->

\color{ppsnBlue}
\setstretch{0.9}	
\LARGE
PPSN Grower Report: Monchuck Farms Ltd.

\normalsize
\setstretch{1}
\color{black}

\begin{multicols}{2}

Thank you `r params$GROWERNAME` for your contribution. This page has been prepared exclusively for you and has not been shared publicly.

You supplied the project with:
\begin{itemize}
  \item `r params$NUMFIELDYEARS` field years of data
  \item `r params$NUMCROPS` different crop types
  \item `r params$NUMYEARS` years of data
\end{itemize}

Quick Facts about your data:
\begin{itemize}
  \item In 2022 `r params$PERCMARGACRES`\% of total acres were marginal (less than \$0 profit/acre)
\end{itemize}

\columnbreak

\vspace*{0.5cm}

\begin{centering}

\textbf{Average yield in bushels per acre for each crop}

```{r yieldTab}

smallCols <- which(nchar(colnames(params$TABLEHERE))>8)
if(length(smallCols)==0) smallCols <- 0

params$TABLEHERE %>% 
  # rename_with(~gsub(' ','S',.x)) %>%
  kable(format = 'latex') %>% 
  column_spec(column=smallCols,width='1.2cm')
  # kable_styling(full_width = FALSE)
  # kable_styling(latex_options = 'scale_down')

```

\textbf{Do these numbers look accurate? Let us know}

\end{centering}


\end{multicols}

```{r profFigure, fig.height=4, fig.width=7.5}
  
  # print('FIGUREHERE')
  params$FIGUREHERE

```

\begin{tcolorbox}[colback=ppsnBlue,arc=0mm,halign=flush center,frame empty]
  \color{white}
  \large
  Thank you again for your support. We look forward to connecting with you when data collection resumes in the fall. Have a great summer!
\end{tcolorbox}


```{r endCleanup}
detach("package:kableExtra", unload = TRUE)
```
